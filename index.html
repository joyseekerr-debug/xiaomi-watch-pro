<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â∞èÁ±≥ËÇ°Á•®Êô∫ËÉΩÁõëÊéß - XiaomiWatch Pro</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            padding: 20px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: 320px 1fr 320px;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        @media (max-width: 1200px) {
            .dashboard-grid { grid-template-columns: 1fr; }
        }
        
        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            backdrop-filter: blur(10px);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(0, 212, 255, 0.1);
        }
        
        .price-large {
            font-size: 48px;
            font-weight: 700;
            background: linear-gradient(135deg, #00d4ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 10px 0;
        }
        
        .text-success { color: #00ff88; }
        .text-danger { color: #ff4757; }
        .text-warning { color: #ffd700; }
        .text-accent { color: #00d4ff; }
        .text-gray { color: rgba(255,255,255,0.5); }
        
        .section-title {
            font-size: 14px;
            color: rgba(255,255,255,0.5);
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        
        .row:last-child { border-bottom: none; }
        
        .update-time {
            font-size: 11px;
            color: rgba(255,255,255,0.4);
            margin-top: 12px;
            text-align: right;
        }
        
        .btn {
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            font-size: 12px;
            transition: opacity 0.2s;
        }
        
        .btn:hover { opacity: 0.8; }
        
        .btn-small {
            padding: 4px 8px;
            font-size: 11px;
        }
        
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            font-size: 24px;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: rgba(255,255,255,0.4);
            font-size: 12px;
            margin-top: 40px;
        }
        
        .news-item {
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            font-size: 13px;
        }
        
        .news-item:last-child { border-bottom: none; }
        
        .news-link {
            color: #00d4ff;
            text-decoration: none;
        }
        
        .news-link:hover { text-decoration: underline; }
        
        .tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            margin-left: 8px;
        }
        
        .tag-positive { background: rgba(0,255,136,0.2); color: #00ff88; }
        .tag-negative { background: rgba(255,71,87,0.2); color: #ff4757; }
        .tag-neutral { background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.6); }
        
        .detail-panel {
            margin-top: 12px;
            padding: 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            font-size: 12px;
        }
        
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.3s ease;
        }
        
        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }
    </style>
</head>
<body>
    <div id="app">
        <div v-if="loading" class="loading">
            ‚è≥ Âä†ËΩΩ‰∏≠...
        </div>
        
        <div v-else>
            <header class="header">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 28px;">üìä</span>
                    <div>
                        <h1 style="font-size: 20px; margin-bottom: 4px;">Â∞èÁ±≥ËÇ°Á•®Êô∫ËÉΩÁõëÊéß</h1>
                        <div style="font-size: 12px; color: #00d4ff;">
                    Á≥ªÁªü v3.1.0 (2025-02-20) ¬∑ È°µÈù¢ v3.2.2 (2025-02-23)
                </div>
                    </div>
                </div>
                <div class="text-gray">
                    {{ currentDate }}
                    <button class="btn btn-small" @click="refreshData" style="margin-left: 10px;">
                        üîÑ Âà∑Êñ∞
                    </button>
                </div>
            </header>

            <div class="dashboard-grid">
                <!-- Â∑¶‰æß -->
                <div>
                    <!-- ËÇ°‰ª∑ -->
                    <div class="card">
                        <div class="section-title">Â∞èÁ±≥ÈõÜÂõ¢-W (1810.HK)</div>
                        <div class="price-large">{{ currentPrice.price?.toFixed(2) }}</div>
                        <div :class="currentPrice.change >= 0 ? 'text-success' : 'text-danger'" style="font-size: 18px;">
                            {{ currentPrice.change >= 0 ? '+' : '' }}{{ currentPrice.change?.toFixed(2) }}
                            ({{ currentPrice.change >= 0 ? '+' : '' }}{{ currentPrice.changePercent?.toFixed(2) }}%)
                        </div>
                        <div class="text-gray" style="margin-top: 10px; font-size: 13px;">
                            ÊúÄÈ´ò: {{ currentPrice.high?.toFixed(2) }} / ÊúÄ‰Ωé: {{ currentPrice.low?.toFixed(2) }}
                        </div>
                        <div class="update-time">Êõ¥Êñ∞‰∫é: {{ updateTime }}</div>
                    </div>

                    <!-- ÊåÅ‰ªì -->
                    <div class="card">
                        <div class="section-title">ÊåÅ‰ªìÁä∂ÊÄÅ</div>
                        <div class="row">
                            <span>ÊåÅ‰ªìËÇ°Êï∞</span>
                            <span>{{ position.shares }}ËÇ°</span>
                        </div>
                        <div class="row">
                            <span>Âπ≥ÂùáÊàêÊú¨</span>
                            <span>{{ position.avgCost?.toFixed(2) }} HKD</span>
                        </div>
                        <div class="row">
                            <span>ÊåÅ‰ªìÂ∏ÇÂÄº</span>
                            <span>{{ position.marketValue?.toFixed(0) }} HKD</span>
                        </div>
                        <div class="row">
                            <span>ÊåÅ‰ªìÁõà‰∫è</span>
                            <span :class="position.profit >= 0 ? 'text-success' : 'text-danger'">
                                {{ position.profit >= 0 ? '+' : '' }}{{ position.profit?.toFixed(0) }}ÂÖÉ
                            </span>
                        </div>
                        <div class="row">
                            <span>Áõà‰∫èÊØî‰æã</span>
                            <span :class="position.profitPercent >= 0 ? 'text-success' : 'text-danger'">
                                {{ position.profitPercent >= 0 ? '+' : '' }}{{ position.profitPercent?.toFixed(2) }}%
                            </span>
                        </div>
                        <div class="update-time">Êõ¥Êñ∞‰∫é: {{ updateTime }}</div>
                    </div>

                    <!-- ÂÖ≥ÈîÆ‰ª∑‰Ωç -->
                    <div class="card">
                        <div class="section-title">ÂÖ≥ÈîÆ‰ª∑‰Ωç</div>
                        <div class="row">
                            <span class="text-success">‰π∞ÂÖ•‰Ωç</span>
                            <span>{{ keyLevels.buy }} HKD</span>
                        </div>
                        <div class="row">
                            <span class="text-danger">ÂçñÂá∫‰Ωç</span>
                            <span>{{ keyLevels.sell }} HKD</span>
                        </div>
                        <div class="row">
                            <span class="text-danger">Ê≠¢Êçü‰Ωç</span>
                            <span>{{ keyLevels.stopLoss }} HKD</span>
                        </div>
                    </div>
                </div>

                <!-- ‰∏≠Èó¥ -->
                <div>
                    <!-- ‰ªäÊó•Âª∫ËÆÆ -->
                    <div class="card" style="text-align: center; padding: 40px;">
                        <div class="section-title">‰ªäÊó•Âª∫ËÆÆ</div>
                        <div :class="adviceColorClass" style="font-size: 42px; font-weight: bold; margin: 20px 0;">
                            {{ todayAdvice.action }}
                        </div>
                        <div class="text-gray" style="font-size: 14px;">{{ todayAdvice.reason }}</div>
                        <div v-if="todayAdvice.detailReason" class="text-gray" style="font-size: 12px; margin-top: 8px;">
                            {{ todayAdvice.detailReason }}
                        </div>
                    </div>

                    <!-- Â§öÂõ†Â≠êËØÑÂàÜ -->
                    <div class="card">
                        <div class="section-title">
                            <span>Â§öÂõ†Â≠êËØÑÂàÜ</span>
                            <button class="btn btn-small" @click="showFactorDetail = !showFactorDetail">
                                {{ showFactorDetail ? 'Êî∂Ëµ∑' : 'ËØ¶ÊÉÖ' }}
                            </button>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 56px; font-weight: bold; background: linear-gradient(135deg, #00d4ff, #00ff88); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                                {{ factorScores.overall }}
                            </div>
                            <div class="text-gray">/100</div>
                        </div>
                        
                        <transition name="fade">
                            <div v-if="showFactorDetail" class="detail-panel">
                                <div class="row">
                                    <span>‰ª∑Ê†º‰ΩçÁΩÆ (30%)</span>
                                    <span :class="getScoreClass(factorScores.price)">{{ factorScores.price }}</span>
                                </div>
                                <div class="row">
                                    <span>Êñ∞ÈóªÊÉÖÁª™ (20%)</span>
                                    <span :class="getScoreClass(factorScores.news)">{{ factorScores.news }}</span>
                                </div>
                                <div class="row">
                                    <span>ËµÑÈáëÊµÅÂêë (20%)</span>
                                    <span :class="getScoreClass(factorScores.fundFlow)">{{ factorScores.fundFlow }}</span>
                                </div>
                                <div class="row">
                                    <span>ËàÜÊÉÖÁõëÊéß (10%)</span>
                                    <span :class="getScoreClass(factorScores.sentiment)">{{ factorScores.sentiment }}</span>
                                </div>
                                <div class="row">
                                    <span>ÊäÄÊúØÂΩ¢ÊÄÅ (15%)</span>
                                    <span :class="getScoreClass(factorScores.technical)">{{ factorScores.technical }}</span>
                                </div>
                                <div class="row">
                                    <span>Â§ßÁõòÁéØÂ¢É (5%)</span>
                                    <span :class="getScoreClass(factorScores.market)">{{ factorScores.market }}</span>
                                </div>
                                <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 11px; color: rgba(255,255,255,0.5);">
                                    ËÆ°ÁÆóÂÖ¨Âºè: ‰ª∑Ê†º√ó0.3 + Êñ∞Èóª√ó0.2 + ËµÑÈáë√ó0.2 + ËàÜÊÉÖ√ó0.1 + ÊäÄÊúØ√ó0.15 + Â§ßÁõò√ó0.05
                                </div>
                            </div>
                        </transition>
                        <div class="update-time">Êõ¥Êñ∞‰∫é: {{ updateTime }}</div>
                    </div>

                    <!-- ËµÑÈáëÊµÅÂêë -->
                    <div class="card">
                        <div class="section-title">
                            <span>ËµÑÈáëÊµÅÂêë</span>
                            <div>
                                <button v-for="tab in fundFlowTabs" :key="tab.value"
                                        class="btn btn-small" 
                                        :style="{ opacity: currentFundTab === tab.value ? 1 : 0.5 }"
                                        @click="currentFundTab = tab.value"
                                        style="margin-left: 5px;">
                                    {{ tab.label }}
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <span>‰∏ªÂäõÂáÄÊµÅÂÖ•</span>
                            <span :class="currentFundFlow.mainInflow >= 0 ? 'text-success' : 'text-danger'">
                                {{ currentFundFlow.mainInflow >= 0 ? '+' : '' }}{{ currentFundFlow.mainInflow?.toFixed(2) }}‰∫ø
                            </span>
                        </div>
                        <div class="row">
                            <span>Êï£Êà∑ÂáÄÊµÅÂÖ•</span>
                            <span :class="currentFundFlow.retailInflow >= 0 ? 'text-success' : 'text-danger'">
                                {{ currentFundFlow.retailInflow >= 0 ? '+' : '' }}{{ currentFundFlow.retailInflow?.toFixed(2) }}‰∫ø
                            </span>
                        </div>
                        <div class="row">
                            <span>ÂåóÂêëËµÑÈáë</span>
                            <span :class="currentFundFlow.northbound >= 0 ? 'text-success' : 'text-danger'">
                                {{ currentFundFlow.northbound >= 0 ? '+' : '' }}{{ currentFundFlow.northbound?.toFixed(2) }}‰∫ø
                            </span>
                        </div>
                        <div class="update-time">Êõ¥Êñ∞‰∫é: {{ updateTime }}</div>
                    </div>
                </div>

                <!-- Âè≥‰æß -->
                <div>
                    <!-- Á≥ªÁªüÁä∂ÊÄÅ -->
                    <div class="card">
                        <div class="section-title">Á≥ªÁªüÁä∂ÊÄÅ</div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="width: 8px; height: 8px; background: #00ff88; border-radius: 50%; display: inline-block;"></span>
                            <span>{{ systemStatus.status }}</span>
                        </div>
                        <div class="text-gray" style="font-size: 12px; margin-top: 8px;">
                            ‰∏ãÊ¨°Êõ¥Êñ∞: {{ systemStatus.nextUpdate }}
                        </div>
                    </div>

                    <!-- ËàÜÊÉÖÁõëÊéß -->
                    <div class="card">
                        <div class="section-title">
                            <span>ËàÜÊÉÖÁõëÊéß</span>
                            <button class="btn btn-small" @click="showSentimentDetail = !showSentimentDetail">
                                {{ showSentimentDetail ? 'Êî∂Ëµ∑' : 'ËØ¶ÊÉÖ' }}
                            </button>
                        </div>
                        <div style="text-align: center;">
                            <div :class="sentimentColorClass" style="font-size: 42px; font-weight: bold;">
                                {{ sentiment.score }}
                            </div>
                            <div :class="sentimentColorClass">{{ sentiment.level }}</div>
                        </div>
                        
                        <transition name="fade">
                            <div v-if="showSentimentDetail" class="detail-panel">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <div style="text-align: center;">
                                        <div class="text-success">{{ sentiment.stats?.positive }}</div>
                                        <div class="text-gray" style="font-size: 10px;">Ê≠£Èù¢</div>
                                    </div>
                                    <div style="text-align: center;">
                                        <div class="text-gray">{{ sentiment.stats?.neutral }}</div>
                                        <div class="text-gray" style="font-size: 10px;">‰∏≠ÊÄß</div>
                                    </div>
                                    <div style="text-align: center;">
                                        <div class="text-danger">{{ sentiment.stats?.negative }}</div>
                                        <div class="text-gray" style="font-size: 10px;">Ë¥üÈù¢</div>
                                    </div>
                                </div>
                                <div style="font-size: 11px; color: rgba(255,255,255,0.5); margin-top: 8px;">
                                    <strong>ËØÑÂàÜÂéüÂõ†:</strong> {{ sentiment.reason }}
                                </div>
                            </div>
                        </transition>
                        <div class="update-time">Êõ¥Êñ∞‰∫é: {{ updateTime }}</div>
                    </div>

                    <!-- ÊúÄÊñ∞Êñ∞Èóª -->
                    <div class="card">
                        <div class="section-title">ÊúÄÊñ∞Êñ∞Èóª</div>
                        <div v-for="(item, index) in news" :key="index" class="news-item">
                            <a :href="item.url" target="_blank" class="news-link">{{ item.title }}</a>
                            <div style="display: flex; justify-content: space-between; margin-top: 6px;">
                                <span class="text-gray" style="font-size: 11px;">{{ item.source }} ¬∑ {{ item.time }}</span>
                                <span class="tag" :class="'tag-' + item.sentiment">{{ item.sentimentText }}</span>
                            </div>
                        </div>
                        <div class="update-time">Êõ¥Êñ∞‰∫é: {{ updateTime }}</div>
                    </div>
                </div>
            </div>

            <footer class="footer">
                <div>Á≥ªÁªü v3.1.0 Oracle-Sentinel (2025-02-20) | È°µÈù¢ v3.2.2 (2025-02-23) | Êõ¥Êñ∞Êó∂Èó¥: {{ updateTime }}</div>
                <div style="margin-top: 8px; color: rgba(255,255,255,0.3);">
                    Êï∞ÊçÆÊù•Ê∫ê: {{ dataSource }}
                </div>
            </footer>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;
        
        createApp({
            setup() {
                const loading = ref(true);
                const showFactorDetail = ref(false);
                const showSentimentDetail = ref(false);
                const currentFundTab = ref('today');
                const dataSource = ref('ÈªòËÆ§Êï∞ÊçÆ');
                const updateTime = ref('');
                
                const API_BASE = 'https://xiaomi-watch-pro-api.joyseekerr.workers.dev';
                
                // ÈªòËÆ§Êï∞ÊçÆ
                const currentPrice = ref({
                    price: 35.36,
                    change: -1.30,
                    changePercent: -3.55,
                    high: 36.86,
                    low: 35.32,
                    open: 36.66,
                    prevClose: 36.66,
                    volume: '9326.99‰∏á',
                    turnover: '33.29‰∫ø'
                });
                
                const position = ref({
                    shares: 1600,
                    avgCost: 35.90,
                    marketValue: 56576,
                    profit: -864,
                    profitPercent: -1.51,
                    isProfit: false
                });
                
                const keyLevels = ref({
                    buy: 34.0,
                    sell: 42.0,
                    stopLoss: 28.0
                });
                
                const todayAdvice = ref({
                    action: 'Á≠âÂæÖ',
                    reason: 'Ë∑ùÁ¶ª‰π∞ÂÖ•‰Ωç34.0ËøòÂ∑Æ3.9%',
                    detailReason: 'ÂΩìÂâç‰ª∑Ê†º35.36ÔºåÂª∫ËÆÆÁ≠âÂæÖÂõûË∞ÉËá≥34.0ÈôÑËøëÂÜçËÄÉËôëÂª∫‰ªì'
                });
                
                const factorScores = ref({
                    overall: 72.8,
                    price: 75,
                    news: 68,
                    fundFlow: 45,
                    sentiment: 58,
                    technical: 65,
                    market: 70
                });
                
                const fundFlowTabs = ref([
                    { value: 'today', label: '‰ªäÊó•' },
                    { value: '5d', label: '5Êó•' },
                    { value: '10d', label: '10Êó•' },
                    { value: '20d', label: '20Êó•' }
                ]);
                
                const fundFlowData = ref({
                    today: { mainInflow: -2.35, retailInflow: 0.85, northbound: -1.20 },
                    '5d': { mainInflow: -8.50, retailInflow: 3.20, northbound: -4.50 },
                    '10d': { mainInflow: -15.20, retailInflow: 6.80, northbound: -8.30 },
                    '20d': { mainInflow: -28.50, retailInflow: 12.50, northbound: -15.60 }
                });
                
                const systemStatus = ref({
                    status: 'Ê≠£Â∏∏ÁõëÊéß‰∏≠',
                    nextUpdate: '2ÂàÜÈíüÂêé'
                });
                
                const sentiment = ref({
                    score: 35,
                    level: 'Ë¥üÈù¢',
                    stats: { positive: 12, neutral: 28, negative: 45, total: 85 },
                    reason: 'ËøëÊúüÈ´òÁÆ°Ë®ÄËÆ∫ÂÅèË∞®ÊÖéÔºåÁ§æ‰∫§Â™í‰ΩìË¥üÈù¢ÊÉÖÁª™ËæÉÂ§öÔºåÊú∫ÊûÑËØÑÁ∫ß‰∏ãË∞É'
                });
                
                const news = ref([
                    { title: 'Â∞èÁ±≥ÈõÜÂõ¢2Êúà20Êó•ÂõûË¥≠428‰∏áËÇ°ÔºåÊ∂âËµÑ1.52‰∫øÊ∏ØÂÖÉ', url: 'https://finance.sina.com.cn/stock/hkstock/ggscyd/2025-02-20/doc-inefukaq9026549.shtml', source: 'Êñ∞Êµ™Ë¥¢Áªè', time: '2Â§©Ââç', sentiment: 'positive', sentimentText: 'Ê≠£Èù¢' },
                    { title: 'Â∞èÁ±≥SU7ÈîÄÈáèË∂ÖÈ¢ÑÊúüÔºå3Êúà‰∫ßËÉΩÂ∞ÜÊèêÂçá', url: 'https://www.cls.cn/detail/1926440', source: 'Ë¥¢ËÅîÁ§æ', time: '3Â§©Ââç', sentiment: 'positive', sentimentText: 'Ê≠£Èù¢' },
                    { title: 'Èõ∑ÂÜõÔºö2025Âπ¥ÊòØÂ∞èÁ±≥Ê±ΩËΩ¶ÂÖ≥ÈîÆ‰πãÂπ¥', url: 'https://www.wallstreetcn.com/articles/1234567', source: 'ÂçéÂ∞îË°óËßÅÈóª', time: '5Â§©Ââç', sentiment: 'neutral', sentimentText: '‰∏≠ÊÄß' },
                    { title: 'Êë©Ê†πÂ§ßÈÄö‰∏ãË∞ÉÂ∞èÁ±≥ÁõÆÊ†á‰ª∑Ëá≥38Ê∏ØÂÖÉ', url: 'https://finance.sina.com.cn/stock/hkstock/ggscyd/2025-02-18/doc-inefukaq9026548.shtml', source: 'Êñ∞Êµ™Ë¥¢Áªè', time: '1Âë®Ââç', sentiment: 'negative', sentimentText: 'Ë¥üÈù¢' }
                ]);
                
                // ËÆ°ÁÆóÂ±ûÊÄß
                const currentDate = computed(() => {
                    return new Date().toLocaleDateString('zh-CN', { 
                        year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' 
                    });
                });
                
                const currentFundFlow = computed(() => {
                    return fundFlowData.value[currentFundTab.value] || { mainInflow: 0, retailInflow: 0, northbound: 0 };
                });
                
                const adviceColorClass = computed(() => {
                    const action = todayAdvice.value.action;
                    if (action === '‰π∞ÂÖ•') return 'text-success';
                    if (action === 'ÂçñÂá∫') return 'text-danger';
                    return 'text-warning';
                });
                
                const sentimentColorClass = computed(() => {
                    const score = sentiment.value.score;
                    if (score >= 70) return 'text-success';
                    if (score >= 40) return 'text-warning';
                    return 'text-danger';
                });
                
                // ÊñπÊ≥ï
                const getScoreClass = (score) => {
                    if (score >= 70) return 'text-success';
                    if (score >= 40) return 'text-warning';
                    return 'text-danger';
                };
                
                const refreshData = async () => {
                    loading.value = true;
                    try {
                        const response = await fetch(`${API_BASE}/api/dashboard`);
                        const result = await response.json();
                        
                        if (!result.error) {
                            if (result.price) currentPrice.value = result.price;
                            if (result.position) position.value = result.position;
                            if (result.keyLevels) keyLevels.value = result.keyLevels;
                            if (result.advice) todayAdvice.value = result.advice;
                            if (result.factorScores) factorScores.value = result.factorScores;
                            if (result.fundFlow) fundFlowData.value = result.fundFlow;
                            if (result.systemStatus) systemStatus.value = result.systemStatus;
                            if (result.sentiment) sentiment.value = result.sentiment;
                            if (result.news && result.news.news) news.value = result.news.news;
                            dataSource.value = 'APIÂÆûÊó∂';
                        }
                    } catch (e) {
                        console.error('API Â§±Ë¥•:', e);
                        dataSource.value = 'ÈªòËÆ§Êï∞ÊçÆ(Á¶ªÁ∫ø)';
                    }
                    updateTime.value = new Date().toLocaleTimeString('zh-CN');
                    loading.value = false;
                };
                
                onMounted(() => {
                    updateTime.value = new Date().toLocaleTimeString('zh-CN');
                    loading.value = false;
                    refreshData();
                    setInterval(refreshData, 300000); // 5ÂàÜÈíüËá™Âä®Âà∑Êñ∞
                });
                
                return {
                    loading,
                    showFactorDetail,
                    showSentimentDetail,
                    currentFundTab,
                    dataSource,
                    updateTime,
                    currentPrice,
                    position,
                    keyLevels,
                    todayAdvice,
                    factorScores,
                    fundFlowTabs,
                    fundFlowData,
                    systemStatus,
                    sentiment,
                    news,
                    currentDate,
                    currentFundFlow,
                    adviceColorClass,
                    sentimentColorClass,
                    getScoreClass,
                    refreshData
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
